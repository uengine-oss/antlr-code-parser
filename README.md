# Robo Analter ANTLR Code Parser

> **robo_analterë¥¼ ìœ„í•œ ANTLR ì½”ë“œ íŒŒì„œ - ë‹¤ì–‘í•œ ì–¸ì–´(Java, Oracle PL/SQL, PostgreSQL ë“±)ì˜ ì†ŒìŠ¤ íŒŒì¼ì„ ì„¸ì…˜ ë‹¨ìœ„ë¡œ ìˆ˜ì§‘í•˜ê³  ANTLRë¡œ íŒŒì‹±í•˜ì—¬ AST JSONì„ ì œê³µí•˜ëŠ” Spring Boot ê¸°ë°˜ ë°±ì—”ë“œ**

[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.3.0-6DB33F?style=flat&logo=spring-boot)](https://spring.io/projects/spring-boot)
[![Java](https://img.shields.io/badge/Java-17-007396?style=flat&logo=openjdk&logoColor=white)](https://www.oracle.com/java/)
[![ANTLR](https://img.shields.io/badge/ANTLR-4.13.1-FF6600?style=flat)](https://www.antlr.org/)

---

## ğŸ“¤ API ìŠ¤í™

### 1. íŒŒì¼ ì—…ë¡œë“œ (`POST /antlr/fileUpload`)

íŒŒì¼ì„ ì„œë²„ì— ì—…ë¡œë“œí•˜ê³  ì €ì¥í•©ë‹ˆë‹¤.

#### ìš”ì²­

| í•­ëª© | ê°’ |
|------|-----|
| **Content-Type** | `multipart/form-data` |
| **Header** | `Session-UUID: {ì„¸ì…˜ UUID}` |

| Part | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `metadata` | JSON string | `{"target": "java", "projectName": "MyProject"}` |
| `files` | File[] | ì—…ë¡œë“œí•  íŒŒì¼ë“¤ (íŒŒì¼ëª…ì— ê²½ë¡œ í¬í•¨) |

**íŒŒì¼ëª… í˜•ì‹:**
```
{projectName}/{ìƒëŒ€ê²½ë¡œ}/{íŒŒì¼ëª…}

ì˜ˆì‹œ:
MyProject/user/UserService.java      â† ì†ŒìŠ¤ íŒŒì¼ â†’ source/user/UserService.java
MyProject/order/OrderController.java â† ì†ŒìŠ¤ íŒŒì¼ â†’ source/order/OrderController.java
MyProject/ddl/schema.sql             â† DDL íŒŒì¼  â†’ ddl/schema.sql
MyProject/ddl/tables/user.sql        â† DDL íŒŒì¼  â†’ ddl/tables/user.sql
```

> **DDL êµ¬ë¶„**: ê²½ë¡œê°€ `{projectName}/ddl/...`ë¡œ ì‹œì‘í•˜ë©´ DDL íŒŒì¼ë¡œ ìë™ ë¶„ë¥˜

#### ì‘ë‹µ

```json
{
  "projectName": "MyProject",
  "files": [
    {"fileName": "user/UserService.java", "fileContent": "package user;..."},
    {"fileName": "order/OrderController.java", "fileContent": "package order;..."}
  ],
  "ddlFiles": [
    {"fileName": "ddl/schema.sql", "fileContent": "CREATE TABLE..."},
    {"fileName": "ddl/tables/user.sql", "fileContent": "CREATE TABLE users..."}
  ]
}
```

---

### 2. íŒŒì‹± ìš”ì²­ (`POST /antlr/parsing`)

ì—…ë¡œë“œëœ íŒŒì¼ë“¤ì„ ANTLRë¡œ íŒŒì‹±í•˜ì—¬ AST JSONì„ ìƒì„±í•©ë‹ˆë‹¤. ì§„í–‰ ìƒí™©ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ NDJSON ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.

#### ìš”ì²­

| í•­ëª© | ê°’ |
|------|-----|
| **Content-Type** | `application/json` |
| **Header** | `Session-UUID: {ì„¸ì…˜ UUID}` |

```json
{
  "target": "java",
  "projectName": "MyProject"
}
```

#### ì‘ë‹µ

- **Content-Type**: `application/x-ndjson` (NDJSON ìŠ¤íŠ¸ë¦¼)
- **íƒ€ì„ì•„ì›ƒ**: 30ë¶„ (ëŒ€ìš©ëŸ‰ íŒŒì¼ ëŒ€ë¹„)

**ì‘ë‹µ í˜•ì‹ (NDJSON - ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„)**
```
{"type": "message", "content": "ğŸš€ íŒŒì‹±ì„ ì‹œì‘í•©ë‹ˆë‹¤. (ì´ 5ê°œ íŒŒì¼)"}
{"type": "message", "content": "ğŸ“„ [1/5] user/UserService.java íŒŒì‹± ì‹œì‘... (523ë¼ì¸)"}
{"type": "message", "content": "ğŸ“ user/UserService.java - 523ë¼ì¸ê¹Œì§€ íŒŒì‹± ì¤‘..."}
{"type": "message", "content": "âœ… [1/5] user/UserService.java ì™„ë£Œ (523ë¼ì¸)"}
{"type": "message", "content": "ğŸ‰ íŒŒì‹± ì™„ë£Œ! ì´ 5ê°œ íŒŒì¼, 2,450ë¼ì¸ ì²˜ë¦¬ë¨"}
{"type": "complete"}
```

**íƒ€ì…**
- `message`: ì§„í–‰ ìƒí™© ë©”ì‹œì§€
- `complete`: íŒŒì‹± ì™„ë£Œ
- `error`: ì—ëŸ¬ ë°œìƒ ì‹œ

> âš ï¸ **íŒŒì‹± ê²°ê³¼(AST JSON ë‚´ìš©)ëŠ” ì‘ë‹µì— í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.** íŒŒì‹± ê²°ê³¼ëŠ” ì„œë²„ì˜ `analysis/` í´ë”ì— ì €ì¥ë©ë‹ˆë‹¤.

---

## ğŸ“ ì €ì¥ êµ¬ì¡°

```
data/{sessionUUID}/{projectName}/
  â”œâ”€â”€ source/                 â† ì†ŒìŠ¤ íŒŒì¼ (ì›ë³¸ í´ë” êµ¬ì¡° ìœ ì§€)
  â”‚   â”œâ”€â”€ user/
  â”‚   â”‚   â””â”€â”€ UserService.java
  â”‚   â””â”€â”€ order/
  â”‚       â””â”€â”€ OrderController.java
  â”œâ”€â”€ ddl/                    â† DDL íŒŒì¼ (ì›ë³¸ í´ë” êµ¬ì¡° ìœ ì§€)
  â”‚   â”œâ”€â”€ schema.sql
  â”‚   â””â”€â”€ tables/
  â”‚       â””â”€â”€ user.sql
  â””â”€â”€ analysis/               â† íŒŒì‹± ê²°ê³¼ JSON (sourceì™€ ë™ì¼ êµ¬ì¡°)
      â”œâ”€â”€ user/
      â”‚   â””â”€â”€ UserService.json
      â””â”€â”€ order/
          â””â”€â”€ OrderController.json
```

---

## ğŸ“Š ì „ì²´ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        í”„ë¡ íŠ¸ì—”ë“œ                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. ì‚¬ìš©ìê°€ íŒŒì¼/í´ë” ì„ íƒ                                       â”‚
â”‚  2. íŒŒì¼ ê²½ë¡œë¥¼ projectName ê¸°ì¤€ìœ¼ë¡œ ì •ê·œí™”                        â”‚
â”‚     - ì†ŒìŠ¤ íŒŒì¼: {projectName}/{ìƒëŒ€ê²½ë¡œ}/{íŒŒì¼ëª…}                 â”‚
â”‚     - DDL íŒŒì¼:  {projectName}/ddl/{ìƒëŒ€ê²½ë¡œ}/{íŒŒì¼ëª…}            â”‚
â”‚  3. FormData êµ¬ì„±                                                â”‚
â”‚     - metadata: JSON ë¬¸ìì—´                                       â”‚
â”‚     - files: ëª¨ë“  íŒŒì¼ (filenameì— ê²½ë¡œ í¬í•¨)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              POST /antlr/fileUpload (multipart/form-data)         â”‚
â”‚              Header: Session-UUID: {uuid}                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì„œë²„ê°€ filename ê²½ë¡œë¡œ ì†ŒìŠ¤/DDL íŒŒì¼ ìë™ êµ¬ë¶„                    â”‚
â”‚  (ddl/ë¡œ ì‹œì‘í•˜ë©´ DDL â†’ ddl/ í´ë”ì— ì €ì¥)                         â”‚
â”‚  (ê·¸ ì™¸ â†’ source/ í´ë”ì— ì €ì¥)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ì‘ë‹µ (JSON)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  {                                                               â”‚
â”‚    "projectName": "MyProject",                                   â”‚
â”‚    "files": [...],      // ì†ŒìŠ¤ íŒŒì¼ (fileName, fileContent)     â”‚
â”‚    "ddlFiles": [...]    // DDL íŒŒì¼ (fileName, fileContent)      â”‚
â”‚  }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              POST /antlr/parsing (application/json)               â”‚
â”‚              Header: Session-UUID: {uuid}                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  { "target": "java", "projectName": "MyProject" }                â”‚
â”‚  (íŒŒì¼ ì—†ì´ ë©”íƒ€ë°ì´í„°ë§Œ ì „ì†¡)                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ì‘ë‹µ (NDJSON ìŠ¤íŠ¸ë¦¼ - ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™©)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  {"type": "message", "content": "ğŸš€ íŒŒì‹±ì„ ì‹œì‘í•©ë‹ˆë‹¤..."}        â”‚
â”‚  {"type": "message", "content": "ğŸ“„ UserService.java íŒŒì‹±..."}    â”‚
â”‚  {"type": "complete"}                                           â”‚
â”‚  (íŒŒì‹± ê²°ê³¼ëŠ” analysis/ í´ë”ì— ì €ì¥ë¨)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ì§€ì› Target

| Target | ì „ëµ í´ë˜ìŠ¤ | target ê°’ | íŒŒì„œ |
|--------|------------|-----------|------|
| **Java** | JavaParserStrategy | `java` | Java20Lexer/Parser |
| **Oracle** | PlSqlParserStrategy | `oracle`, `plsql` | PlSqlLexer/Parser |
| **PostgreSQL** | PostgreSqlParserStrategy | `postgresql`, `postgres` | PostgreSQLLexer/Parser |

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ìš”êµ¬ì‚¬í•­

- JDK 17+
- Maven 3.8+

### ë¹Œë“œ & ì‹¤í–‰

```bash
# ë¹Œë“œ
mvn clean install -Dmaven.test.skip=true

# ì‹¤í–‰
mvn spring-boot:run
```

ì„œë²„: `http://localhost:8081`

### API í…ŒìŠ¤íŠ¸

```bash
# í—¬ìŠ¤ì²´í¬
curl http://localhost:8081/

# íŒŒì¼ ì—…ë¡œë“œ
curl -X POST http://localhost:8081/antlr/fileUpload \
  -H "Session-UUID: test-session" \
  -F 'metadata={"target":"java","projectName":"TestProject"}' \
  -F "files=@TestProject/Main.java;filename=TestProject/Main.java"

# íŒŒì‹± (NDJSON ìŠ¤íŠ¸ë¦¼ ì‘ë‹µ)
curl -X POST http://localhost:8081/antlr/parsing \
  -H "Session-UUID: test-session" \
  -H "Content-Type: application/json" \
  -d '{"target":"java","projectName":"TestProject"}'
```

---

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/main/java/legacymodernizer/parser/
â”œâ”€â”€ ParserApplication.java          â† Spring Boot ì§„ì…ì 
â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ FileUploadController.java   â† REST API (/antlr/fileUpload, /antlr/parsing)
â”‚   â””â”€â”€ HealthCheckController.java  â† í—¬ìŠ¤ì²´í¬ API (GET /)
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ FileParserService.java      â† íŒŒì¼ ì €ì¥/íŒŒì‹± ê³µí†µ ë¡œì§
â”‚   â””â”€â”€ parsing/
â”‚       â”œâ”€â”€ TargetParserStrategy.java     â† ì „ëµ ì¸í„°í˜ì´ìŠ¤
â”‚       â”œâ”€â”€ ParserStrategyFactory.java    â† ì „ëµ íŒ©í† ë¦¬
â”‚       â”œâ”€â”€ JavaParserStrategy.java       â† Java íŒŒì‹±
â”‚       â”œâ”€â”€ PlSqlParserStrategy.java      â† Oracle PL/SQL íŒŒì‹±
â”‚       â””â”€â”€ PostgreSqlParserStrategy.java â† PostgreSQL íŒŒì‹±
â”œâ”€â”€ antlr/
â”‚   â”œâ”€â”€ Node.java                   â† AST ë…¸ë“œ (toJson ì§ë ¬í™”)
â”‚   â”œâ”€â”€ java/                       â† Java ANTLR íŒŒì¼
â”‚   â”œâ”€â”€ plsql/                      â† Oracle PL/SQL ANTLR íŒŒì¼
â”‚   â””â”€â”€ postgresql/                 â† PostgreSQL ANTLR íŒŒì¼
â””â”€â”€ config/
    â””â”€â”€ WebConfig.java              â† CORS, ì˜ˆì™¸ ì²˜ë¦¬
```

---

## ğŸ”‘ í•µì‹¬ í¬ì¸íŠ¸

1. **DDL êµ¬ë¶„**: ë³„ë„ í•„ë“œê°€ ì•„ë‹Œ íŒŒì¼ ê²½ë¡œë¡œ ìë™ êµ¬ë¶„ (`ddl/`ë¡œ ì‹œì‘í•˜ë©´ DDL)
2. **í´ë” êµ¬ì¡° ìœ ì§€**: ì—…ë¡œë“œëœ í´ë” êµ¬ì¡°ê°€ ê·¸ëŒ€ë¡œ ìœ ì§€ë¨
3. **2ë‹¨ê³„ ì²˜ë¦¬**: ì—…ë¡œë“œ â†’ íŒŒì‹±ì´ ë¶„ë¦¬ (íŒŒì‹±ì€ ë©”íƒ€ë°ì´í„°ë§Œ ì „ì†¡)
4. **íŒŒì‹± ê²°ê³¼**: ì‘ë‹µì— í¬í•¨ë˜ì§€ ì•Šê³  `analysis/` í´ë”ì— ì €ì¥
5. **Session-UUID**: ëª¨ë“  ìš”ì²­ì— ì„¸ì…˜ ì‹ë³„ìš© í—¤ë” í•„ìˆ˜
6. **íŒŒì‹± ìŠ¤íŠ¸ë¦¼**: íŒŒì‹± APIëŠ” NDJSON ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì§„í–‰ ìƒí™©ì„ ì‹¤ì‹œê°„ ì „ë‹¬ (íƒ€ì„ì•„ì›ƒ 30ë¶„)
7. **íŒŒì¼ í¬ê¸° ì œí•œ**: ìµœëŒ€ íŒŒì¼ í¬ê¸° 100MB, ìµœëŒ€ ìš”ì²­ í¬ê¸° 500MB

---

## ğŸ“š ì°¸ê³ 

- [ANTLR 4 ê³µì‹ ë¬¸ì„œ](https://github.com/antlr/antlr4)
- [Spring Boot ë ˆí¼ëŸ°ìŠ¤](https://docs.spring.io/spring-boot/docs/3.3.0/reference/html/)
